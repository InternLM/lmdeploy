{"name": "test_restful_chat_tp2[prepare_environment1]", "status": "broken", "statusDetails": {"message": "PermissionError: [Errno 13] Permission denied: '/nvme/qa_test_models/autotest_model/log/start_restful_internlm2-chat-20b.log'", "trace": "request = <SubRequest 'prepare_environment' for <Function test_restful_chat_tp2[prepare_environment1]>>\nconfig = {'dataset_path': '/nvme/qa_test_models/...dataset', 'dst_path': '/nvme/qa_test_models/autotest_model', 'log_path': '/nvme/qa_test_models/autotest_model/log', 'model_path': '/mnt/bigdisk/qa_test_models', ...}\nworker_id = 'master'\n\n    @pytest.fixture(scope='function', autouse=True)\n    def prepare_environment(request, config, worker_id):\n        model_path = config.get('model_path')\n        log_path = config.get('log_path')\n    \n        param = request.param\n        model = param['model']\n        cuda_prefix = param['cuda_prefix']\n        tp_num = param['tp_num']\n    \n        if cuda_prefix is None:\n            cuda_prefix = get_cuda_prefix_by_workerid(worker_id, tp_num=tp_num)\n    \n        worker_num = get_workerid(worker_id)\n        if worker_num is None:\n            port = DEFAULT_PORT\n        else:\n            port = DEFAULT_PORT + worker_num\n    \n        cmd = get_command_with_extra('lmdeploy serve api_server ' + model_path +\n                                     '/' + model + ' --backend pytorch' +\n                                     ' --server-port ' + str(port),\n                                     config,\n                                     model,\n                                     need_tp=True,\n                                     cuda_prefix=cuda_prefix)\n    \n        print('reproduce command restful: ' + cmd)\n    \n        start_log = os.path.join(log_path,\n                                 'start_restful_' + model.split('/')[1] + '.log')\n    \n>       with open(start_log, 'w') as f:\nE       PermissionError: [Errno 13] Permission denied: '/nvme/qa_test_models/autotest_model/log/start_restful_internlm2-chat-20b.log'\n\nautotest/tools/restful/test_restful_chat_hf_pytorch.py:51: PermissionError"}, "parameters": [{"name": "prepare_environment", "value": "{'model': 'internlm/internlm2-chat-20b', 'cuda_prefix': None, 'tp_num': 2}"}], "start": 1712112977455, "stop": 1712112977455, "uuid": "bed2ef82-af61-4686-852f-ea1ab07ecb37", "historyId": "d666702016320401fb7f99d77e6b727a", "testCaseId": "84510cd809e0f811f4d69bd159b08804", "fullName": "tools.restful.test_restful_chat_hf_pytorch#test_restful_chat_tp2", "labels": [{"name": "tag", "value": "flaky(reruns=0)"}, {"name": "tag", "value": "gpu_num_2"}, {"name": "tag", "value": "restful_api_pytorch"}, {"name": "tag", "value": "@pytest.mark.usefixtures('common_case_config')"}, {"name": "tag", "value": "order(7)"}, {"name": "parentSuite", "value": "tools.restful"}, {"name": "suite", "value": "test_restful_chat_hf_pytorch"}, {"name": "host", "value": "SH-IDC1-10-140-24-142"}, {"name": "thread", "value": "191894-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tools.restful.test_restful_chat_hf_pytorch"}]}